//****************************************************************************
// @Module        Real Timer Clock (RTC)
// @Filename      RTC.C
// @Project       cn_tmc200.dav
//----------------------------------------------------------------------------
// @Controller    Infineon C164CI-L
//
// @Compiler      Keil
//
// @Codegenerator 2.1
//
// @Description   This file contains functions that use the RTC module.
//
//----------------------------------------------------------------------------
// @Date          02.01.2009 15:59:17
//
//****************************************************************************

// USER CODE BEGIN (RTC_General,1)

// USER CODE END



//****************************************************************************
// @Project Includes
//****************************************************************************

#include "MAIN.H"

// USER CODE BEGIN (RTC_General,2)

// USER CODE END


//****************************************************************************
// @Macros
//****************************************************************************

// USER CODE BEGIN (RTC_General,3)

// USER CODE END


//****************************************************************************
// @Defines
//****************************************************************************

// USER CODE BEGIN (RTC_General,4)

// USER CODE END


//****************************************************************************
// @Typedefs
//****************************************************************************

// USER CODE BEGIN (RTC_General,5)

// USER CODE END


//****************************************************************************
// @Imported Global Variables
//****************************************************************************

// USER CODE BEGIN (RTC_General,6)

// USER CODE END


//****************************************************************************
// @Global Variables
//****************************************************************************

// USER CODE BEGIN (RTC_General,7)

// USER CODE END


//****************************************************************************
// @External Prototypes
//****************************************************************************

// USER CODE BEGIN (RTC_General,8)

// USER CODE END


//****************************************************************************
// @Prototypes Of Local Functions
//****************************************************************************

// USER CODE BEGIN (RTC_General,9)

// USER CODE END


//****************************************************************************
// @Function      void RTC_Init(void) 
//
//----------------------------------------------------------------------------
// @Description   This is the initialization function of the RTC function 
//                library. It is assumed that the SFRs used by this library 
//                are in its reset state. 
//
//----------------------------------------------------------------------------
// @Returnvalue   None
//
//----------------------------------------------------------------------------
// @Parameters    None
//
//----------------------------------------------------------------------------
// @Date          02.01.2009
//
//****************************************************************************

// USER CODE BEGIN (Init,1)

// USER CODE END

void RTC_Init(void)
{
  // USER CODE BEGIN (Init,2)

  // USER CODE END

  ///  - the overflow period on T14 is   51,2000 [µs]

  T14            =  0xFFFF;      // load RTC T14 register
  T14REL         =  0xFFFF;      // load RTC reload register

  ///  -----------------------------------------------------------------------
  ///  Configuration of the used RTC Interrupts:
  ///  -----------------------------------------------------------------------

  // USER CODE BEGIN (Init,3)

  // USER CODE END

} //  End of function RTC_Init


//****************************************************************************
// @Function      void RTC_SetTime(ulong RegValue) 
//
//----------------------------------------------------------------------------
// @Description   This function loads the RTC timer (RTCH and RTCL) with the 
//                forwarded value.
//
//----------------------------------------------------------------------------
// @Returnvalue   None
//
//----------------------------------------------------------------------------
// @Parameters    RegValue: 
//                RTCL and RTCH load value
//
//----------------------------------------------------------------------------
// @Date          02.01.2009
//
//****************************************************************************

// USER CODE BEGIN (SetTime,1)

// USER CODE END

void RTC_SetTime(ulong RegValue)
{
  ulong tmp;

  RTCL = 0x0000;
  tmp  = RegValue % 65536;
  RTCH = (uword) (RegValue >> 16);
  RTCL = (uword) tmp;

} //  End of function RTC_SetTime


//****************************************************************************
// @Function      ulong RTC_GetTime(void) 
//
//----------------------------------------------------------------------------
// @Description   This function returns the contents of the RTC timer (RTCH 
//                and RTCL).
//
//----------------------------------------------------------------------------
// @Returnvalue   ulong Value
//
//----------------------------------------------------------------------------
// @Parameters    None
//
//----------------------------------------------------------------------------
// @Date          02.01.2009
//
//****************************************************************************

// USER CODE BEGIN (GetTime,1)

// USER CODE END

ulong RTC_GetTime(void)
{
  return(RTCH * 65536 + RTCL);

} //  End of function RTC_GetTime


//****************************************************************************
// @Function      void RTC_Reset(void) 
//
//----------------------------------------------------------------------------
// @Description   This function loads the RTC timer (RTCH and RTCL) with the 
//                value 0x00000000.
//
//----------------------------------------------------------------------------
// @Returnvalue   None
//
//----------------------------------------------------------------------------
// @Parameters    None
//
//----------------------------------------------------------------------------
// @Date          02.01.2009
//
//****************************************************************************

// USER CODE BEGIN (Reset,1)

// USER CODE END

void RTC_Reset(void)
{
  RTCL = 0x0000;
  RTCH = 0x0000;

} //  End of function RTC_Reset




// USER CODE BEGIN (RTC_General,10)

// USER CODE END

